<!doctype html>
<html>
  <head>
    <title>Git Status Test</title>
  </head>
  <body>
    <h1>Git Repository Status Test</h1>
    <div id="status">Loading...</div>
    <button onclick="checkStatus()">Check Status</button>

    <script src="js/auth.js"></script>
    <script>
      let authManager;

      // Initialize auth manager
      document.addEventListener("DOMContentLoaded", function () {
        authManager = new AuthManager();

        setTimeout(() => {
          checkStatus();
        }, 1000);
      });

      async function checkStatus() {
        const statusDiv = document.getElementById("status");

        try {
          statusDiv.innerHTML = "Checking...";

          if (!authManager) {
            statusDiv.innerHTML = "AuthManager not ready";
            return;
          }

          const response = await authManager.apiRequest("/api/git/repo/status");
          statusDiv.innerHTML =
            "<pre>" + JSON.stringify(response, null, 2) + "</pre>";
        } catch (error) {
          statusDiv.innerHTML = "Error: " + error.message;
          console.error("Error:", error);
        }
      }
    </script>
  </body>
</html>
